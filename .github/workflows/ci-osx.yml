name: GitHub macOS CI

on: [push, pull_request]

jobs:
  macOS:
    runs-on: macOS-10.15

    steps:
      - uses: actions/checkout@v2

      - name: Install VTK
        run: |
          brew install vtk

      #- name: Install Sctoch
      #  run: |
      #    git clone https://gitlab.inria.fr/scotch/scotch.git && cd scotch
      #    git checkout v6.1.3
      #    cd src && cp Make.inc/Makefile.inc.i686_mac_darwin10 Makefile.inc
      #    make scotch -j "$NJOBS"
      #    make install scotch -j "$NJOBS"
      #  env: |
      #    NJOBS: "2"

      #- name: Install LibCommons
      #  run: |
      #    git clone https://github.com/ISCDtoolbox/Commons.git && cd Commons
      #    mkdir build
      #    cd build && cmake ..
      #    make install
          
      #- name: Install LinearElasticity
      #  run: |
      #    git clone https://github.com/ISCDtoolbox/LinearElasticity.git && cd LinearElasticity
      #    mkdir build
      #    cd build && cmake ..
      #    make install

      - name: Build Mmg
        run: |
          git clone https://github.com/MmgTools/mmg.git && cd mmg
          mkdir build && cd build
          cmake ..
        # make -j "$NJOBS" mmg2d
        env: |
          NJOBS: "2"
